(function(){"use strict",window.sclient||(window.sclient={});var a=window.sclient;Function.prototype.inheritFrom=function(a){var b=new a;this.prototype=b},a.report=function(a){throw new Error(a?a:"Something went wrong")}})(),function(){"use strict",window.sclient||(window.sclient={});var a=window.sclient;a.EventEmitter=function(){this.listeners={}},a.EventEmitter.prototype.on=function(a,b){this.listeners[a]instanceof Array||(this.listeners[a]=[]),this.listeners[a].indexOf(b)===-1&&this.listeners[a].push(b)},a.EventEmitter.prototype.off=function(a,b){if(this.listeners[a]instanceof Array){var c=this.listeners[a].indexOf(b);c!==-1&&this.listeners[a].splice(c,1)}},a.EventEmitter.prototype.emit=function(a,b){b=b||{};if(this.listeners[a]instanceof Array){var c=this.listeners[a].length;for(var d=0;d<c;d+=1)this.listeners[a][d](this,b)}}}(),function(){"use strict",window.sclient||(window.sclient={});var a=window.sclient;a.ObservableCollection=function(){this.listeners={},this.items=[]},a.ObservableCollection.inheritFrom(a.EventEmitter),a.ObservableCollection.prototype.at=function(b){return(b<0||b>=this.items.length)&&a.report("Index out of bounds"),this.items[b]},a.ObservableCollection.prototype.has=function(a){return this.items.indexOf(a)>=0},a.ObservableCollection.prototype.count=function(){return this.items.length},a.ObservableCollection.prototype.add=function(a){return this.has(a)||(this.items.push(a),this.emit("change")),this},a.ObservableCollection.prototype.remove=function(a){var b=this.items.indexOf(a);return b>=0&&(this.items.splice(b,1),this.emit("change")),this},a.ObservableCollection.prototype.sortBy=function(a){return this.items.sort(a),this.emit("change"),this},a.ObservableCollection.prototype.orderBy=function(a,b){return this.sortBy(function(c,d){var e=0,f=a(c),g=a(d);return f>g?1:(f<g&&(e=-1),b?-e:e)})},a.ObservableCollection.prototype.each=function(a){for(var b=0;b<this.items.length;b+=1)a(this.items[b])},a.ObservableCollection.prototype.any=function(a){var b=!1;return this.each(function(c){a(c)&&(b=!0)}),b},a.ObservableCollection.prototype.notify=function(a){this.on("change",a)},a.ObservableCollection.prototype.ignore=function(a){this.off("change",a)}}(),function(){"use strict",window.sclient||(window.sclient={});var a=window.sclient;a.ObservableProperty=function(a){this.value=a,this.listeners={}},a.ObservableProperty.inheritFrom(a.EventEmitter),a.ObservableProperty.prototype.get=function(){return this.value},a.ObservableProperty.prototype.set=function(a){this.value!==a&&(this.value=a,this.emit("change"))},a.ObservableProperty.prototype.notify=function(a){this.on("change",a)},a.ObservableProperty.prototype.ignore=function(a){this.off("change",a)}}(),function(){"use strict",window.sclient||(window.sclient={});var a=window.sclient;a.Connector=function(a,b){this.url=a,this.callback=b,this.minTiming=10,this.maxTiming=1e3,this.cacheSize=10,this.timingCache=[],this.isStarted=!1},a.Connector.prototype.start=function(){return this.isStarted||(this.isStarted=!0,this.runLoop()),this},a.Connector.prototype.stop=function(){return this.isStarted=!1,this},a.Connector.prototype.runLoop=function(){var a=this;this.request();var b=0;this.timingCache.forEach(function(a){b+=a});var c=b>0?b/this.timingCache.length:0,d=Math.min(Math.max(this.minTiming,c),this.maxTiming);this.isStarted&&setTimeout(function(){a.runLoop()},d)},a.Connector.prototype.request=function(){var a=this,b=new Date;$.ajax(this.url,{crossDomain:!0,dataType:"jsonp"}).done(function(c){var d=new Date,e=d-b;a.timingCache.push(e),a.timingCache.length>a.cacheSize&&a.timingCache.shift(),a.callback(c)}).fail(function(a){throw new Error("Request failed")})}}(),function(){"use strict",window.sclient||(window.sclient={});var a=window.sclient,b=(new a.Connector("http://eris.generation-p.com/test/get-shapes.do",function(a){console.log(b.timingCache)})).start()}();